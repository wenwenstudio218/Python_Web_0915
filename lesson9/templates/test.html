<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chart.js 散點圖(Scatter) 範例</title>
    <style>
        /* 給圖表一個固定的繪圖區域 */
        .chart-container {
            position: relative;
            width: 80vw;
            height: 80vh;
            margin: 20px auto;
            border: 1px solid #ddd;
        }
    </style>
</head>

<body>
    <h1>範例：學生身高 vs 體重 散點圖</h1>

    <div class="chart-container">
        <canvas id="myChartCanvas"></canvas>
    </div>

    <script src="{{ url_for('static',filename='vendor/chart.js/chart.umd.js') }}"></script>
    
<script>
    document.addEventListener('DOMContentLoaded', function () {
        console.log("Chart.js 已經載入，現在可以使用 'Chart' 這個物件了。");

        // 3. JS:抓取畫布和2D工具箱
        const ctx = document.getElementById('myChartCanvas').getContext('2d');

        // 散點圖的資料
        const studentData = [
            { x: 158, y: 55 },
            { x: 162, y: 58 },
            { x: 165, y: 62 },
            { x: 170, y: 65 },
            { x: 173, y: 70 },
            { x: 175, y: 68 },
            { x: 180, y: 75 },
            { x: 182, y: 78 }
        ];

        //建立圖表
        const myScatterChart = new Chart(ctx, {
            // 指定圖表類型為scatter
            type: 'scatter',

            // data物件,存放資料
            data: {
                datasets: [
                    {
                        label: '學生身高體重 (第一組)',
                        data: studentData,
                        backgroundColor: 'rgba(255, 99, 132, 0.6)', //點的顏色
                        borderColor: 'rgba(255, 99, 132, 1)',
                        pointRadius: 8, //點的大小
                        pointHoverRadius: 10 //滑鼠移上去時的點的大小
                    },
                    {
                        label: '學生第二組資料',
                        data: [
                            { x: 160, y: 70 },
                            { x: 170, y: 80 }
                        ],
                        backgroundColor: 'rgba(54, 162, 235, 0.6)',
                        pointRadius: 8, //點的大小
                        pointHoverRadius: 10 //滑鼠移上去時的點的大小
                    }
                ]
            },
            //options物件,設定圖表的外觀
            options: {
                responsive: true,
                maintainAspectRatio: false,

                //座標軸設定
                scales: {
                    x: {
                        type: 'linear',
                        position: 'bottom',
                        title: {
                            display: true,
                            text: '身高 (cm)',
                            font: { size: 16 }
                        }
                    },
                    y: {
                        title: {
                            display: true,
                            text: '體重 (kg)',
                            font: { size: 16 }
                        }

                    }
                },
                // 插件 (plugins)設定，例如標題和提示
                plugins: {
                    title: {
                        display: true,
                        text: '身高和體重的關係',
                        font: { size: 20 },
                        padding: 20
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                // console.log(context);
                                let label = context.dataset.label || '';
                                let xVal = context.parsed.x;
                                let yVal = context.parsed.y;
                                return `${label}: ${xVal} cm, ${yVal} kg` // 字串插補
                            }
                        }
                    }
                }
            }
        })

    });
</script>

    
</body>

</html>