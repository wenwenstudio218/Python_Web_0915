# 類別與實體

## 什麼是類別 (Class)？

在 Python 中，**類別** 是一種用來定義物件的藍圖或模板。它描述了物件應該有哪些屬性（資料）和方法（行為）。

類別就像是一個設計圖，告訴我們如何創建物件。例如，汽車的類別可能包含顏色、品牌等屬性，以及開車、停車等方法。

### 定義類別的語法

```python
class 類別名稱:
    # 類別的屬性和方法
    pass
```

## 什麼是實體 (Instance)？

**實體** 是根據類別創建出來的具體物件。每個實體都是類別的一個獨立複本，具有類別定義的屬性和方法。

例如，如果 `Car` 是類別，那麼 `my_car = Car()` 就是一個實體。

### 創建實體的語法

```python
實體名稱 = 類別名稱()
```

## 範例：簡單的類別與實體

讓我們看一個簡單的範例：

```python
class Dog:
    def __init__(self, name, age):
        self.name = name  # 屬性
        self.age = age    # 屬性
    
    def bark(self):      # 方法
        print(f"{self.name} 汪汪叫！")

# 創建實體
my_dog = Dog("小白", 3)

# 使用實體的屬性和方法
print(f"狗狗的名字是 {my_dog.name}")
print(f"狗狗的年齡是 {my_dog.age}")
my_dog.bark()  # 呼叫方法
```

### 輸出結果

```
狗狗的名字是 小白
狗狗的年齡是 3
小白 汪汪叫！
```

## 關鍵概念

1. **`__init__` 方法**：這是建構函數，用來初始化實體的屬性。當創建實體時會自動呼叫。

2. **`self` 參數**：在類別方法中，`self` 代表實體本身，用來存取屬性和其他方法。

3. **屬性 (Attributes)**：實體的資料，如 `name` 和 `age`。

4. **方法 (Methods)**：實體的行為，如 `bark()`。

## 練習題

1. 創建一個 `Student` 類別，包含 `name` 和 `grade` 屬性，以及一個 `study()` 方法。
2. 創建 `Student` 的實體，並呼叫其方法。

## 更多實際範例：由淺至深

### 範例 1：簡單的計算機類別

這個範例展示如何創建一個類別來模擬簡單的計算機。

```python
class Calculator:
    def __init__(self):
        self.result = 0  # 初始化結果為 0
    
    def add(self, num):
        self.result += num
        return self.result
    
    def subtract(self, num):
        self.result -= num
        return self.result
    
    def reset(self):
        self.result = 0
        return self.result

# 創建實體
calc = Calculator()

# 使用方法
print(calc.add(5))      # 輸出: 5
print(calc.add(3))      # 輸出: 8
print(calc.subtract(2)) # 輸出: 6
print(calc.reset())     # 輸出: 0
```

### 範例 2：銀行帳戶類別（包含多個實體）

這個範例展示如何管理多個實體，以及類別方法的使用。

```python
class BankAccount:
    def __init__(self, owner, balance=0):
        self.owner = owner
        self.balance = balance
    
    def deposit(self, amount):
        if amount > 0:
            self.balance += amount
            print(f"{self.owner} 存入 {amount} 元，餘額：{self.balance} 元")
        else:
            print("存入金額必須大於 0")
    
    def withdraw(self, amount):
        if amount > 0 and amount <= self.balance:
            self.balance -= amount
            print(f"{self.owner} 取出 {amount} 元，餘額：{self.balance} 元")
        else:
            print("取出金額無效或餘額不足")
    
    def check_balance(self):
        print(f"{self.owner} 的帳戶餘額：{self.balance} 元")

# 創建多個實體
account1 = BankAccount("小明", 1000)
account2 = BankAccount("小華", 500)

# 操作實體
account1.deposit(200)      # 小明 存入 200 元，餘額：1200 元
account1.withdraw(100)     # 小明 取出 100 元，餘額：1100 元
account1.check_balance()   # 小明 的帳戶餘額：1100 元

account2.deposit(300)      # 小華 存入 300 元，餘額：800 元
account2.withdraw(1000)    # 取出金額無效或餘額不足
account2.check_balance()   # 小華 的帳戶餘額：800 元
```

### 範例 3：學生管理系統（類別間的互動）

這個範例展示多個類別如何互動，以及更複雜的邏輯。

```python
class Student:
    def __init__(self, name, student_id):
        self.name = name
        self.student_id = student_id
        self.grades = []  # 儲存成績的列表
    
    def add_grade(self, grade):
        if 0 <= grade <= 100:
            self.grades.append(grade)
            print(f"{self.name} 添加成績：{grade}")
        else:
            print("成績必須在 0-100 之間")
    
    def get_average(self):
        if self.grades:
            return sum(self.grades) / len(self.grades)
        return 0
    
    def display_info(self):
        avg = self.get_average()
        print(f"學生：{self.name} (學號：{self.student_id})")
        print(f"成績：{self.grades}")
        print(f"平均成績：{avg:.2f}")

class Classroom:
    def __init__(self, class_name):
        self.class_name = class_name
        self.students = []  # 儲存學生實體的列表
    
    def add_student(self, student):
        self.students.append(student)
        print(f"{student.name} 加入 {self.class_name} 班級")
    
    def show_all_students(self):
        print(f"\n{self.class_name} 班級學生列表：")
        for student in self.students:
            student.display_info()
            print("---")
    
    def get_class_average(self):
        if self.students:
            total_avg = sum(student.get_average() for student in self.students)
            return total_avg / len(self.students)
        return 0

# 創建學生實體
student1 = Student("小明", "001")
student2 = Student("小華", "002")

# 添加成績
student1.add_grade(85)
student1.add_grade(92)
student2.add_grade(78)
student2.add_grade(88)

# 創建班級實體
classroom = Classroom("Python 程式設計班")

# 添加學生到班級
classroom.add_student(student1)
classroom.add_student(student2)

# 顯示班級資訊
classroom.show_all_students()
print(f"班級平均成績：{classroom.get_class_average():.2f}")
```

### 範例 4：進階 - 繼承的概念簡介

這個範例簡單介紹類別繼承，讓您看到類別如何擴展。

```python
class Animal:
    def __init__(self, name):
        self.name = name
    
    def speak(self):
        pass  # 基底類別的方法，子類別會覆寫

class Dog(Animal):  # Dog 繼承自 Animal
    def speak(self):
        return f"{self.name} 汪汪叫！"

class Cat(Animal):  # Cat 繼承自 Animal
    def speak(self):
        return f"{self.name} 喵喵叫！"

# 創建實體
dog = Dog("小白")
cat = Cat("小花")

print(dog.speak())  # 小白 汪汪叫！
print(cat.speak())  # 小花 喵喵叫！
```

這些範例展示了從簡單的單一類別，到多實體管理，再到類別間互動，最後簡介繼承的概念。建議您親自執行這些程式碼，並嘗試修改它們來加深理解。

## 總結

- 類別是物件的模板
- 實體是類別的具體實現
- 使用類別可以組織和重用程式碼